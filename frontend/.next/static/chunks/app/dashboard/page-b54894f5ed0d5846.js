(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3119:function(e,s,t){Promise.resolve().then(t.bind(t,4280))},4280:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var a=t(7437),l=t(2265);let r=t(3464).Z.create({baseURL:"http://localhost:8080/api",headers:{"Content-Type":"application/json"}});var n=t(7625),i=t(7031),d=t(6940),c=t(7059),o=t(2994),x=t(8147),m=t(1699),b=t(407),u=t(5169),h=t(3574),p=t(5863),g=t(2252),j=t(2636),f=t(3417),N=t(5302),v=t(525),y=t(1994),k=t(3335);let w={praise:"#3b82f6",bug:"#ef4444",feature_request:"#8b5cf6",uncategorized:"#64748b"};function C(){let[e,s]=(0,l.useState)([]),[t,k]=(0,l.useState)(!0),[C,Z]=(0,l.useState)(null),[L,R]=(0,l.useState)(!1),P=(0,l.useCallback)(async()=>{try{Z(null);let e=await r.get("/feedback");s(e.data)}catch(e){console.error("Error fetching feedback",e),Z("Failed to load feedback. Please try again later.")}finally{k(!1),R(!1)}},[]);(0,l.useEffect)(()=>{P()},[P]);let E={total:e.length,processed:e.filter(e=>e.is_processed).length,pending:e.filter(e=>!e.is_processed).length},K=Object.entries(e.reduce((e,s)=>{let t=s.category||"uncategorized";return e[t]=(e[t]||0)+1,e},{})).map(e=>{let[s,t]=e;return{name:s.replace("_"," "),value:t,originalKey:s}}),A={positive:e.filter(e=>"positive"===e.sentiment).length,negative:e.filter(e=>"negative"===e.sentiment).length,neutral:e.filter(e=>"neutral"===e.sentiment).length},F=[{name:"Positive",value:A.positive,color:"#10b981"},{name:"Negative",value:A.negative,color:"#ef4444"},{name:"Neutral",value:A.neutral,color:"#f59e0b"}].filter(e=>e.value>0);return t?(0,a.jsx)("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center text-slate-50",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(p.Z,{className:"animate-spin text-blue-500",size:48}),(0,a.jsx)("p",{className:"text-slate-400",children:"Loading feedback data..."})]})}):C?(0,a.jsx)("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center text-slate-50 p-4",children:(0,a.jsxs)("div",{className:"bg-slate-900 border border-red-900/50 p-8 rounded-2xl max-w-md w-full text-center",children:[(0,a.jsx)(g.Z,{className:"mx-auto text-red-500 mb-4",size:48}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-slate-400 mb-6",children:C}),(0,a.jsx)("button",{onClick:P,className:"px-6 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors",children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-50 p-4 md:p-8 font-sans",children:[(0,a.jsxs)("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent",children:"Feedback Funnel"}),(0,a.jsx)("p",{className:"text-slate-400",children:"AI-powered sentiment & category analysis"})]}),(0,a.jsxs)("button",{onClick:()=>{R(!0),P()},disabled:L,className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-700 hover:bg-slate-800 hover:border-slate-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(j.Z,{size:18,className:(0,y.Z)({"animate-spin":L})}),L?"Refreshing...":"Refresh"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)(S,{icon:(0,a.jsx)(f.Z,{className:"text-blue-400"}),label:"Total Feedback",value:E.total,color:"blue"}),(0,a.jsx)(S,{icon:(0,a.jsx)(N.Z,{className:"text-emerald-400"}),label:"Processed",value:E.processed,color:"emerald"}),(0,a.jsx)(S,{icon:(0,a.jsx)(g.Z,{className:"text-amber-400"}),label:"Pending AI",value:E.pending,color:"amber",animate:E.pending>0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-slate-800 backdrop-blur-sm",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(v.Z,{size:20,className:"text-blue-400"})," Category Breakdown"]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(i.v,{data:K,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#334155",vertical:!1}),(0,a.jsx)(c.K,{dataKey:"name",stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1,className:"capitalize"}),(0,a.jsx)(o.B,{stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(x.u,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid #334155",borderRadius:"8px"},cursor:{fill:"#1e293b"}}),(0,a.jsx)(m.$,{dataKey:"value",radius:[4,4,0,0],children:K.map((e,s)=>(0,a.jsx)(b.b,{fill:w[e.originalKey]||w.uncategorized},"cell-".concat(s)))})]})})})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-slate-800 backdrop-blur-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Sentiment Distribution"}),(0,a.jsx)("div",{className:"h-64 flex items-center justify-center",children:F.length>0?(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(u.u,{children:[(0,a.jsx)(h.b,{data:F,innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:F.map((e,s)=>(0,a.jsx)(b.b,{fill:e.color,stroke:"rgba(0,0,0,0)"},"cell-".concat(s)))}),(0,a.jsx)(x.u,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid #334155",borderRadius:"8px"}})]})}):(0,a.jsxs)("div",{className:"text-slate-500 flex flex-col items-center",children:[(0,a.jsx)(g.Z,{size:32,className:"mb-2 opacity-50"}),"No sentiment data yet"]})}),(0,a.jsx)("div",{className:"flex justify-center gap-4 mt-4",children:F.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),e.name," (",e.value,")"]},e.name))})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-2xl border border-slate-800 overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"p-6 border-b border-slate-800",children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Feedback"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-800/50 text-slate-400 text-xs uppercase font-medium tracking-wider",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 w-24",children:"Source"}),(0,a.jsx)("th",{className:"p-4",children:"Content & Summary"}),(0,a.jsx)("th",{className:"p-4 w-32",children:"Category"}),(0,a.jsx)("th",{className:"p-4 w-32",children:"Sentiment"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-800/50",children:0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No feedback records found."})}):e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-800/30 transition-colors group",children:[(0,a.jsx)("td",{className:"p-4 align-top",children:(0,a.jsx)("span",{className:"px-2 py-1 bg-slate-800 rounded text-xs font-mono text-slate-300 border border-slate-700",children:e.source})}),(0,a.jsxs)("td",{className:"p-4 align-top",children:[(0,a.jsx)("p",{className:"font-medium text-slate-200 mb-1",children:e.is_processed?e.summary:(0,a.jsxs)("span",{className:"text-slate-500 italic flex items-center gap-1",children:[(0,a.jsx)(p.Z,{size:12,className:"animate-spin"})," Processing AI..."]})}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 line-clamp-2 group-hover:line-clamp-none transition-all duration-300",children:['"',e.content,'"']})]}),(0,a.jsx)("td",{className:"p-4 align-top",children:(0,a.jsx)(_,{category:e.category})}),(0,a.jsx)("td",{className:"p-4 align-top",children:(0,a.jsx)(z,{sentiment:e.sentiment})})]},e.ID))})]})})]})]})}function S(e){let{icon:s,label:t,value:l,color:r,animate:n=!1}=e;return(0,a.jsxs)("div",{className:(0,k.m6)("bg-slate-900/50 p-6 rounded-2xl border border-slate-800 flex items-center gap-4 transition-all duration-300 hover:bg-slate-800/50 group",{blue:"group-hover:border-blue-500/30",emerald:"group-hover:border-emerald-500/30",amber:"group-hover:border-amber-500/30"}[r]),children:[(0,a.jsx)("div",{className:(0,k.m6)("p-4 rounded-xl transition-all duration-300","blue"===r&&"bg-blue-500/10 text-blue-500","emerald"===r&&"bg-emerald-500/10 text-emerald-500","amber"===r&&"bg-amber-500/10 text-amber-500"),children:n?(0,a.jsx)("div",{className:"animate-pulse",children:s}):s}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-400 text-sm font-medium",children:t}),(0,a.jsx)("p",{className:"text-3xl font-bold text-slate-100",children:l})]})]})}function z(e){let{sentiment:s}=e,t=(null==s?void 0:s.toLowerCase())||"pending";return s?(0,a.jsx)("span",{className:(0,k.m6)("px-2.5 py-1 rounded-full border text-[10px] font-bold uppercase tracking-wider",{positive:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",negative:"bg-red-500/10 text-red-500 border-red-500/20",neutral:"bg-amber-500/10 text-amber-500 border-amber-500/20"}[t]||"bg-slate-800 text-slate-500 border-slate-700"),children:s}):(0,a.jsx)("span",{className:"text-xs text-slate-600 font-mono",children:"PENDING"})}function _(e){let{category:s}=e,t=null==s?void 0:s.toLowerCase();return s?(0,a.jsx)("span",{className:(0,k.m6)("px-2 py-1 rounded-md border text-xs font-semibold capitalize whitespace-nowrap",{bug:"text-red-400 bg-red-400/10 border-red-400/20",feature_request:"text-violet-400 bg-violet-400/10 border-violet-400/20",praise:"text-blue-400 bg-blue-400/10 border-blue-400/20"}[t]||"text-slate-400 bg-slate-800 border-slate-700"),children:s.replace("_"," ")}):(0,a.jsx)("span",{className:"text-slate-600 text-sm",children:"-"})}}},function(e){e.O(0,[166,971,117,744],function(){return e(e.s=3119)}),_N_E=e.O()}]);